(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(22)},19:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getBaseUrl",function(){return O}),a.d(n,"CriaRequerimento",function(){return k}),a.d(n,"ConsultaRequerimentoPelaId",function(){return D}),a.d(n,"ListaRequerimentos",function(){return S}),a.d(n,"RemoveRequerimentoPelaId",function(){return j});var r={};a.r(r),a.d(r,"getBaseUrl",function(){return R}),a.d(r,"CriaTermoDeCompromisso",function(){return _}),a.d(r,"ConsultaTermoDeCompromissoPeloRegistro",function(){return A}),a.d(r,"ListaTermosDeCompromisso",function(){return N});var o={};a.r(o),a.d(o,"getBaseUrl",function(){return x}),a.d(o,"CriaApolice",function(){return T}),a.d(o,"ConsultaApolicePelaId",function(){return w}),a.d(o,"ListaApolices",function(){return P}),a.d(o,"RemoveApolicePelaId",function(){return B});var c={};a.r(c),a.d(c,"getBaseUrl",function(){return U}),a.d(c,"ConsultaConcedentePelaId",function(){return F}),a.d(c,"ListaConcedentes",function(){return I}),a.d(c,"ListaPropostas",function(){return M}),a.d(c,"AtualizaConcedente",function(){return z}),a.d(c,"RemovePropostaPelaId",function(){return $});var l={};a.r(l),a.d(l,"getBaseUrl",function(){return J}),a.d(l,"Novo",function(){return G}),a.d(l,"ConsultaPelaId",function(){return V}),a.d(l,"ListaTodosAtestadosParaUmCurso",function(){return Z}),a.d(l,"ListaTodos",function(){return X}),a.d(l,"Atualiza",function(){return H}),a.d(l,"RemovePelaId",function(){return Y});var i={};a.r(i),a.d(i,"getBaseUrl",function(){return Q}),a.d(i,"Novo",function(){return ee}),a.d(i,"ConsultaPelaId",function(){return te}),a.d(i,"ListaTodos",function(){return ae}),a.d(i,"Atualiza",function(){return ne}),a.d(i,"RemovePelaId",function(){return re});var s={};a.r(s),a.d(s,"getBaseUrl",function(){return ce}),a.d(s,"Novo",function(){return le}),a.d(s,"ConsultaPelaId",function(){return ie}),a.d(s,"ListaTodos",function(){return se});var u={};a.r(u),a.d(u,"Login",function(){return me}),a.d(u,"Logout",function(){return de}),a.d(u,"Refresh",function(){return fe}),a.d(u,"accessTokenAtivo",function(){return pe}),a.d(u,"refreshTokenAtivo",function(){return he}),a.d(u,"accessToken",function(){return ve});var m=a(0),d=a.n(m),f=a(11),p=a.n(f),h=a(4),v=a(5),g=a(6),b=a(7),E=a(1),C=a(3),y="/requerimentos",O=function(){return"".concat(Ce).concat(y)};function k(e,t,a){ye({url:"".concat(Ce).concat(y),params:{method:"POST",body:JSON.stringify(e)},onSuccess:t,onError:a})}function D(e,t,a){ye({url:"".concat(Ce).concat(y,"/").concat(e),onSuccess:t,onError:a})}function S(e,t){ye({url:"".concat(Ce).concat(y),onSuccess:e,onError:t})}function j(e,t,a){ye({url:"".concat(Ce).concat(y,"/").concat(e),params:{method:"DELETE"},onSuccess:t,onError:a})}var R=function(){return"".concat(Ce).concat("/tce")};function _(e,t,a){ye({url:"".concat(R()),params:{method:"POST",body:JSON.stringify(e)},onSuccess:t,onError:a})}function A(e,t,a){ye({url:"".concat(R(),"/").concat(e),onSuccess:t,onError:a})}function N(e,t){ye({url:"".concat(R()),onSuccess:e,onError:t})}var L="/apolices",x=function(){return"".concat(Ce).concat(L)};function T(e,t,a){ye({url:"".concat(Ce).concat(L),params:{method:"POST",body:JSON.stringify(e)},onSuccess:t,onError:a})}function w(e,t,a){ye({url:"".concat(Ce).concat(L,"/").concat(e),onSuccess:t,onError:a})}function P(e,t){ye({url:"".concat(Ce).concat(L),onSuccess:e,onError:t})}function B(e,t,a){ye({url:"".concat(Ce).concat(L,"/").concat(e),params:{method:"DELETE"},onSuccess:t,onError:a})}var q="/concedentes",U=function(){return"".concat(Ce).concat(q)};function F(e,t,a){ye({url:"".concat(Ce).concat(q,"/").concat(e),onSuccess:t,onError:a})}function I(e,t){ye({url:"".concat(Ce).concat(q),onSuccess:e,onError:t})}function M(e,t){ye({url:"".concat(Ce).concat(q,"/inativos"),onSuccess:e,onError:t})}function z(e,t,a,n){ye({url:"".concat(Ce).concat(q,"/").concat(e),params:{method:"PUT",body:JSON.stringify(t)},onSuccess:a,onError:n})}function $(e,t,a){ye({url:"".concat(Ce).concat(q,"/").concat(e),params:{method:"DELETE"},onSuccess:t,onError:a})}var W="/locais_de_estagio",J=function(){return"".concat(Ce).concat(W)};function G(e,t,a){ye({url:"".concat(Ce).concat(W),params:{method:"POST",body:JSON.stringify(e)},onSuccess:t,onError:a})}function V(e,t,a){ye({url:"".concat(Ce).concat(W,"/").concat(e),onSuccess:t,onError:a})}function Z(e,t,a){ye({url:"".concat(Ce).concat(W,"/").concat(e,"/curso_id"),onSuccess:t,onError:a})}function X(e,t){ye({url:"".concat(Ce).concat(W),onSuccess:e,onError:t})}function H(e,t,a,n){ye({url:"".concat(Ce).concat(W,"/").concat(e),params:{method:"PUT",body:JSON.stringify(t)},onSuccess:a,onError:n})}function Y(e,t,a){ye({url:"".concat(Ce).concat(W,"/").concat(e),params:{method:"DELETE"},onSuccess:t,onError:a})}var K="/atestes_de_campo",Q=function(){return"".concat(Ce).concat(K)};function ee(e,t,a){ye({url:"".concat(Ce).concat(K),params:{method:"POST",body:JSON.stringify(e)},onSuccess:t,onError:a})}function te(e,t,a){ye({url:"".concat(Ce).concat(K,"/").concat(e),onSuccess:t,onError:a})}function ae(e,t){ye({url:"".concat(Ce).concat(K),onSuccess:e,onError:t})}function ne(e,t,a,n){ye({url:"".concat(Ce).concat(K,"/").concat(e),params:{method:"PUT",body:JSON.stringify(t)},onSuccess:a,onError:n})}function re(e,t,a){ye({url:"".concat(Ce).concat(K,"/").concat(e),params:{method:"DELETE"},onSuccess:t,onError:a})}var oe="/cursos",ce=function(){return"".concat(Ce).concat(oe)};function le(e,t,a){ye({url:"".concat(Ce).concat(oe),params:{method:"POST",body:JSON.stringify(e)},onSuccess:t,onError:a})}function ie(e,t,a){ye({url:"".concat(Ce).concat(oe,"/").concat(e),onSuccess:t,onError:a})}function se(e,t){ye({url:"".concat(Ce).concat(oe),onSuccess:e,onError:t})}var ue={clientId:"",clientSecret:""};function me(e,t){var a=ue.clientId,n=ue.clientSecret,r=void 0!==a&&void 0!==n?window.btoa("".concat(a,":").concat(n)):"";ye({url:"https://nixauth.herokuapp.com/oauth/token",params:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Basic ".concat(r)},mode:"cors",body:"grant_type=password&username=".concat(e,"&password=").concat(t)},onSuccess:function(e){var t=new Date;t.setTime(t.getTime()+1e3*e.expires_in),document.cookie="access_token=".concat(e.access_token,"; expires=").concat(t.toUTCString(),";"),t.setTime(t.getTime()+2e3*e.expires_in),document.cookie="refresh_token=".concat(e.refresh_token,"; expires=").concat(t.toUTCString(),";")},onError:function(e){console.log(e);var t=new Date;document.cookie="access_token=; expires=".concat(t.toUTCString(),";"),document.cookie="refresh_token=; expires=".concat(t.toUTCString(),";")}})}function de(){var e=new Date;document.cookie="access_token=; expires=".concat(e.toUTCString(),";"),document.cookie="refresh_token=; expires=".concat(e.toUTCString(),";")}function fe(){var e=ge();ye({url:"https://nixauth.herokuapp.com/oauth/token",params:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Basic ZXN0YWdpbDplc3RhZ2lsLWJldGE="},mode:"cors",body:"grant_type=refresh_token&refresh_token=".concat(e)},onSuccess:function(e){var t=new Date;t.setTime(t.getTime()+1e3*e.expires_in),document.cookie="access_token=".concat(e.access_token,"; expires=").concat(t.toUTCString(),";"),t.setTime(t.getTime()+2e3*e.expires_in),document.cookie="refresh_token=".concat(e.refresh_token,"; expires=").concat(t.toUTCString(),";")},onError:function(e){console.log(e);var t=new Date;document.cookie="access_token=; expires=".concat(t.toUTCString(),";"),document.cookie="refresh_token=; expires=".concat(t.toUTCString(),";")}})}function pe(){return void 0!==ve()}function he(){return void 0!==ge()}function ve(){return be().access_token}function ge(){return be().refresh_token}function be(){return document.cookie.split(";").reduce(function(e,t){var a=t.split("=");return e[a[0].trim()]=a[1],e},{})}function Ee(){this.Requerimentos=n,this.TermosDeCompromisso=r,this.Apolices=o,this.Concedentes=c,this.CamposDeEstagio=l,this.AtestesDeCampo=i,this.Cursos=s,this.Auth=u}var Ce="https://api-estagil-gm.herokuapp.com";function ye(e){var t=e.url,a=void 0===t?"":t,n=e.params,r=void 0===n?{}:n,o=e.onSuccess,c=void 0===o?function(e){return e}:o,l=e.onError,i=void 0===l?function(e){return e}:l,s={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(ve())},mode:"cors"},u=Object(C.a)({},s,r);fetch("".concat(a),u).then(function(e){e.ok?e.json().then(function(e){return c(e)}):401===e.status?e.json().then(function(e){return"invalid_token"===e.error?de():fe()}):e.text().then(function(e){return i(e)})}).catch(function(e){i(e)})}function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var ke=function(e){Object(g.a)(a,e);var t=Oe(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={rota:""},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.atualizaRota(),window.onhashchange=function(t){return e.atualizaRota()}}},{key:"atualizaRota",value:function(){var e=window.location.hash,t=Object.keys(this.props.rotas).includes(e)?e:"";this.setState({rota:t})}},{key:"render",value:function(){var e=this.state.rota,t=this.props.rotas[e];return d.a.createElement(t,this.props)}}]),a}(m.Component);a(19);function De(e){var t=e.menu;return void 0===t?"":d.a.createElement("ul",{className:"nav"},Object.keys(t).map(function(e){var a=t[e];return d.a.createElement("li",{key:e},d.a.createElement("a",{href:a.href},e),void 0!==a.dropdown?d.a.createElement("div",{className:"nav-dropdown"},a.dropdown.map(function(e){return d.a.createElement("a",{key:e.href,href:e.href},e.label)})):"")}))}var Se=a(2);function je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var Re=function(e){Object(g.a)(a,e);var t=je(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={listaDeRequerimentos:[]},e.carregarListaDeRequerimentos=e.carregarListaDeRequerimentos.bind(Object(Se.a)(e)),e.apagarRequerimento=e.apagarRequerimento.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.carregarListaDeRequerimentos()}},{key:"carregarListaDeRequerimentos",value:function(){var e=this;this.props.api.Requerimentos.ListaRequerimentos(function(t){return e.setState({listaDeRequerimentos:t})},function(e){return console.log("erro",e)})}},{key:"linkParaBaixarRequerimento",value:function(e){var t=this.props.api;return"".concat(t.Requerimentos.getBaseUrl(),"/").concat(e,"/baixar")}},{key:"apagarRequerimento",value:function(e){this.props.api.Requerimentos.RemoveRequerimentoPelaId(e,this.setState(function(t){return{listaDeRequerimentos:t.listaDeRequerimentos.filter(function(t){return t.id!==e})}}),function(e){return console.log("erro",e)})}},{key:"render",value:function(){var e=this,t=this.state.listaDeRequerimentos;return d.a.createElement("div",null,d.a.createElement("h5",null,"Rela\xe7\xe3o de Requerimentos"),d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"CPF"),d.a.createElement("th",null,"Nome"),d.a.createElement("th",null,"Matr\xedcula"),d.a.createElement("th",null))),d.a.createElement("tbody",null,t.map(function(t){var a=e.linkParaBaixarRequerimento(t.id);return d.a.createElement("tr",{key:t.id},d.a.createElement("td",null,t.aluno.cpf),d.a.createElement("td",null,t.aluno.nome),d.a.createElement("td",null,t.aluno.matricula),d.a.createElement("td",null,d.a.createElement("button",{onClick:function(){return window.open(a,"_blank")}},"Baixar"),d.a.createElement("button",{onClick:function(){return e.apagarRequerimento(t.id)}},"Apagar")))}))))}}]),a}(m.Component),_e=a(9);function Ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var Ne=function(e){Object(g.a)(a,e);var t=Ae(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={listaDePropostas:[]},e.carregarListaDePropostas=e.carregarListaDePropostas.bind(Object(Se.a)(e)),e.efetivarProposta=e.efetivarProposta.bind(Object(Se.a)(e)),e.apagarProposta=e.apagarProposta.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.carregarListaDePropostas()}},{key:"carregarListaDePropostas",value:function(){var e=this;this.props.api.Concedentes.ListaPropostas(function(t){return e.setState({listaDePropostas:t})},function(e){return console.log("erro",e)})}},{key:"efetivarProposta",value:function(e){var t=this.props.api,a=Object(C.a)({},e,{identificacao_cadastral:e.identificacao_cadastral.codigo_de_cadastro,ativo:!0});t.Concedentes.AtualizaConcedente(a.id,a,window.location.href=" #",function(e){return console.log("erro",e)})}},{key:"apagarProposta",value:function(e){this.props.api.Concedentes.RemovePropostaPelaId(e,this.setState(function(t){return{listaDePropostas:t.listaDePropostas.filter(function(t){return t.id!==e})}}),function(e){return console.log("erro",e)})}},{key:"linkParaBaixarAcordoDeCooperacao",value:function(e){var t=this.props.api;return"".concat(t.Concedentes.getBaseUrl(),"/").concat(e,"/baixar")}},{key:"baixar",value:function(e){var t=this,a=this.props.api.Auth.accessToken(),n=this.linkParaBaixarAcordoDeCooperacao(e);fetch(n,{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e.blob()}).then(function(a){var n=window.URL.createObjectURL(new Blob([a]));t.setState(function(t){var a=t.listaDePropostas,r=a.filter(function(t){return t.id===e})[0],o=Object(C.a)({},r,{blobUrl:n}),c=a.reduce(function(t,a){return t.push(a.id===e?o:a),t},[]);return Object(C.a)({},t,{listaDePropostas:Object(_e.a)(c)})})})}},{key:"render",value:function(){var e=this,t=this.state.listaDePropostas;return d.a.createElement("div",null,d.a.createElement("h5",null,"Rela\xe7\xe3o de Propostas para Concedente"),d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Ident. Cadastral"),d.a.createElement("th",null,"Nome"),d.a.createElement("th",null,"Ramo de Atividade"),d.a.createElement("th",null,"Telefone"),d.a.createElement("th",null,"Email"),d.a.createElement("th",null))),d.a.createElement("tbody",null,t.map(function(t){return d.a.createElement("tr",{key:t.id,title:t.observacoes},d.a.createElement("td",null,t.identificacao_cadastral.tipo_de_cadastro?"".concat(t.identificacao_cadastral.tipo_de_cadastro,": "):d.a.createElement(d.a.Fragment,null),t.identificacao_cadastral.codigo_de_cadastro),d.a.createElement("td",null,t.nome),d.a.createElement("td",null,t.ramo_atividade),d.a.createElement("td",null,t.telefone),d.a.createElement("td",null,t.email),d.a.createElement("td",null,void 0===t.blobUrl?d.a.createElement("button",{onClick:function(){return e.baixar(t.id)}},"Baixar"):d.a.createElement("button",{onClick:function(){return window.open(t.blobUrl,"_blank")}},"Abrir"),d.a.createElement("button",{onClick:function(){return e.efetivarProposta(t)}},"Efetivar"),d.a.createElement("button",{onClick:function(){return e.apagarProposta(t.id)}},"Apagar")))}))))}}]),a}(m.Component);function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var xe=function(e){Object(g.a)(a,e);var t=Le(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={listaDeConcedentes:[]},e.carregarListaDeConcedentes=e.carregarListaDeConcedentes.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.carregarListaDeConcedentes()}},{key:"carregarListaDeConcedentes",value:function(){var e=this;this.props.api.Concedentes.ListaConcedentes(function(t){return e.setState({listaDeConcedentes:t})},function(e){return console.log("erro",e)})}},{key:"linkParaBaixarAcordoDeCooperacao",value:function(e){var t=this.props.api;return"".concat(t.Concedentes.getBaseUrl(),"/").concat(e,"/baixar")}},{key:"baixar",value:function(e){var t=this,a=this.props.api.Auth.accessToken(),n=this.linkParaBaixarAcordoDeCooperacao(e);fetch(n,{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e.blob()}).then(function(a){var n=window.URL.createObjectURL(new Blob([a]));t.setState(function(t){var a=t.listaDeConcedentes,r=a.filter(function(t){return t.id===e})[0],o=Object(C.a)({},r,{blobUrl:n}),c=a.reduce(function(t,a){return t.push(a.id===e?o:a),t},[]);return Object(C.a)({},t,{listaDeConcedentes:Object(_e.a)(c)})})})}},{key:"render",value:function(){var e=this,t=this.state.listaDeConcedentes;return d.a.createElement("div",null,d.a.createElement("h5",null,"Rela\xe7\xe3o de Concedentes"),d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Ident. Cadastral"),d.a.createElement("th",null,"Nome"),d.a.createElement("th",null,"Ramo de Atividade"),d.a.createElement("th",null,"Telefone"),d.a.createElement("th",null,"Email"),d.a.createElement("th",null))),d.a.createElement("tbody",null,t.map(function(t){return d.a.createElement("tr",{key:t.id},d.a.createElement("td",null,t.identificacao_cadastral.tipo_de_cadastro?"".concat(t.identificacao_cadastral.tipo_de_cadastro,": "):d.a.createElement(d.a.Fragment,null),t.identificacao_cadastral.codigo_de_cadastro),d.a.createElement("td",null,t.nome),d.a.createElement("td",null,t.ramo_atividade),d.a.createElement("td",null,t.telefone),d.a.createElement("td",null,t.email),d.a.createElement("td",null,void 0===t.blobUrl?d.a.createElement("button",{onClick:function(){return e.baixar(t.id)}},"Baixar"):d.a.createElement("button",{onClick:function(){return window.open(t.blobUrl,"_blank")}},"Abrir")))}))))}}]),a}(m.Component),Te=a(8),we=a(13);function Pe(e){var t=e.listaDeConcedentes,a=e.onSelect;return d.a.createElement("div",null,d.a.createElement("h5",null,"Selecione o Acordo de Coopera\xe7\xe3o em que este campo de est\xe1gio estar\xe1 vinculado..."),d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"CNPJ"),d.a.createElement("th",null,"Nome"),d.a.createElement("th",null,"Ramo de Atividade"),d.a.createElement("th",null,"Telefone"),d.a.createElement("th",null,"Email"))),d.a.createElement("tbody",null,t.map(function(e){return d.a.createElement("tr",{key:e.id,onClick:function(){return a(e)}},d.a.createElement("td",null,e.cnpj),d.a.createElement("td",null,e.nome),d.a.createElement("td",null,e.ramo_atividade),d.a.createElement("td",null,e.telefone),d.a.createElement("td",null,e.email))}))))}function Be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var qe=function(e){Object(g.a)(a,e);var t=Be(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).onChange=e.onChange.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value,r={name:"endereco",value:Object(C.a)({},this.props.value,Object(Te.a)({},a,n))};this.props.onChange({target:r})}},{key:"carregaCEP",value:function(e){var t=this;fetch("https://viacep.com.br/ws/".concat(e,"/json/")).then(function(e){return e.json()}).then(function(a){var n={name:"endereco",value:{cep:e,logradouro:a.logradouro,bairro:a.bairro,cidade:a.localidade,uf:a.uf}};t.props.onChange({target:n})})}},{key:"render",value:function(){var e=this,t=this.props.value,a=t.cep,n=t.logradouro,r=t.bairro,o=t.cidade,c=t.uf;return d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-lg-2 col-sm-3 col-8"},d.a.createElement("label",{htmlFor:"cep"},"CEP"),d.a.createElement("label",{className:"badge badge-pill badge-info"},"somente n\xfameros"),d.a.createElement("input",{className:"form-control",id:"cep",name:"cep",type:"text",value:a,onBlur:function(){return 8===a.length?e.carregaCEP(a):""},onChange:this.onChange,required:!0,placeholder:"somente n\xfameros",minLength:"8",maxLength:"8",pattern:"^[0-9]{8}$"})),d.a.createElement("div",{className:"form-group col-lg-1 col-sm-2 col-4"},d.a.createElement("label",{htmlFor:"uf"},"UF"),d.a.createElement("input",{className:"form-control",id:"uf",name:"uf",type:"text",value:c,onChange:this.onChange,required:!0,minLength:"2",maxLength:"2",pattern:"^[A-Za-z]{2}$"})),d.a.createElement("div",{className:"form-group col-lg-6 col-sm-7 col-12"},d.a.createElement("label",{htmlFor:"cidade"},"Cidade"),d.a.createElement("input",{className:"form-control",id:"cidade",name:"cidade",type:"text",value:o,onChange:this.onChange,required:!0,minLength:"2",maxLength:"40",pattern:"^.{2,40}$"})),d.a.createElement("div",{className:"form-group col-lg-3 col-sm-4 col-12"},d.a.createElement("label",{htmlFor:"bairro"},"Bairro"),d.a.createElement("input",{className:"form-control",id:"bairro",name:"bairro",type:"text",value:r,onChange:this.onChange,required:!0,minLength:"2",maxLength:"20",pattern:"^.{2,20}$"})),d.a.createElement("div",{className:"form-group col-lg-12 col-sm-8 col-12"},d.a.createElement("label",{htmlFor:"logradouro"},"Endere\xe7o"),d.a.createElement("input",{className:"form-control",id:"logradouro",name:"logradouro",type:"text",placeholder:"Rua, Avenida, Pra\xe7a...",value:n,onChange:this.onChange,required:!0,minLength:"3",maxLength:"80",pattern:"^.{3,80}$"})))}}]),a}(d.a.Component);function Ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var Fe=function(e){Object(g.a)(a,e);var t=Ue(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).cpf=d.a.createRef(),e.onChange=e.onChange.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value,r={name:"representante_legal",value:Object(C.a)({},this.props.value,Object(Te.a)({},a,n))};this.props.onChange({target:r})}},{key:"render",value:function(){var e=this.props.value,t=e.nome,a=e.cargo,n=e.cpf,r=this.onChange;return d.a.createElement("div",null,d.a.createElement("div",{className:"bg-light"},d.a.createElement("h2",{className:"my-0 text-dark"},"Representante Legal")),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-lg-12 col-md-12 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"nome"},"Nome Completo"),d.a.createElement("input",{className:"form-control",id:"nome",name:"nome",type:"text",value:t,onChange:r,required:!0,minLength:"7",maxLength:"60",pattern:"^[".concat("A-Z\xc0-\xdca-z\xe0-\xfc","][").concat("A-Z\xc0-\xdca-z\xe0-\xfc"," ]{5,58}[").concat("A-Z\xc0-\xdca-z\xe0-\xfc","]$")})),d.a.createElement("div",{className:"form-group col-lg-8 col-md-8 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"cargo"},"Cargo"),d.a.createElement("input",{className:"form-control",id:"cargo",name:"cargo",type:"text",value:a,placeholder:"Propriet\xe1rio, Diretor...",onChange:r,required:!0,minLength:"2",maxLength:"60",pattern:"^.{2,60}$"})),d.a.createElement("div",{className:"form-group col-lg-4 col-md-4 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"cpf"},"CPF"),d.a.createElement("label",{className:"badge badge-pill badge-info"},"somente n\xfameros"),d.a.createElement("label",{className:"badge badge-pill badge-light"},"opcional"),d.a.createElement("input",{className:"form-control",id:"cpf",name:"cpf",type:"text",defaultValue:void 0!==n?n:"",ref:this.cpf,onChange:r,placeholder:"somente n\xfameros",minLength:"11",maxLength:"11",pattern:"^[0-9]{11}$"}))))}}]),a}(d.a.Component);function Ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var Me=function(e){Object(g.a)(a,e);var t=Ie(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={listaDeConcedentes:[],dados:{nome:"",telefone:"",endereco:{cep:"",logradouro:"",bairro:"",cidade:"",uf:""}},representanteLegalAtivo:!1},e.carregaListaDeConcedentes=e.carregaListaDeConcedentes.bind(Object(Se.a)(e)),e.replicarDadosDoConcedente=e.replicarDadosDoConcedente.bind(Object(Se.a)(e)),e.ativaRepresentanteLegal=e.ativaRepresentanteLegal.bind(Object(Se.a)(e)),e.desativaRepresentanteLegal=e.desativaRepresentanteLegal.bind(Object(Se.a)(e)),e.email=d.a.createRef(),e.onChange=e.onChange.bind(Object(Se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.carregaListaDeConcedentes()}},{key:"carregaListaDeConcedentes",value:function(){var e=this;this.props.api.Concedentes.ListaConcedentes(function(t){return e.setState({listaDeConcedentes:t})})}},{key:"criarCampoDeEstagio",value:function(e){this.props.api.CamposDeEstagio.Novo(e,window.location.href=" #",function(e){return console.log(e)})}},{key:"replicarDadosDoConcedente",value:function(){var e=this.state.dados.concedente,t={nome:e.nome,telefone:e.telefone,email:e.email,endereco:e.endereco};this.setState(function(e){return Object(C.a)({},e,{dados:Object(C.a)({},e.dados,t),replica_concedente:!1})})}},{key:"ativaRepresentanteLegal",value:function(e){e.preventDefault(),this.setState(function(e){return{dados:Object(C.a)({},e.dados,{representante_legal:{nome:"",cargo:""}}),representanteLegalAtivo:!0}})}},{key:"desativaRepresentanteLegal",value:function(e){e.preventDefault(),this.setState(function(e){var t=e.dados;t.representante_legal;return{dados:Object(we.a)(t,["representante_legal"]),representanteLegalAtivo:!1}})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state.dados;this.criarCampoDeEstagio(t)}},{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(function(e){return{dados:Object(C.a)({},e.dados,Object(Te.a)({},a,n))}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.dados,n=t.listaDeConcedentes,r=t.replica_concedente,o=t.representanteLegalAtivo;if(void 0===a.concedente)return d.a.createElement(Pe,{listaDeConcedentes:n,onSelect:function(t){return e.setState(function(e){return{dados:Object(C.a)({},e.dados,{concedente:t})}})}});var c=a.nome,l=a.telefone,i=a.email,s=a.endereco,u=a.representante_legal;return r&&this.replicarDadosDoConcedente(),d.a.createElement("form",{className:"container",onSubmit:this.onSubmit},d.a.createElement("h5",{className:"my-1 text-dark"},"Dados cadastrais do Campo de Est\xe1gio"),void 0===r?d.a.createElement("button",{onClick:function(){return e.setState({replica_concedente:!0})}},"Importar dados do concedente"):"",d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-lg-9 col-md-9 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"nome"},"Nome"),d.a.createElement("input",{className:"form-control",id:"nome",name:"nome",type:"text",value:c,onChange:this.onChange,required:!0,minLength:"2",maxLength:"80",pattern:"^.{2,80}$"}))),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-lg-3 col-md-3 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"telefone"},"Telefone"),d.a.createElement("label",{className:"badge badge-pill badge-info"},"somente n\xfameros"),d.a.createElement("input",{className:"form-control",id:"telefone",name:"telefone",type:"text",value:l,onChange:this.onChange,required:!0,placeholder:"somente n\xfameros",minLength:"8",maxLength:"11",pattern:"^[0-9]{8,11}$"})),d.a.createElement("div",{className:"form-group col-lg-5 col-md-5 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"email"},"Email"),d.a.createElement("input",{className:"form-control",id:"email",name:"email",type:"email",defaultValue:void 0!==i?i:"",ref:this.email,onChange:this.onChange,minLength:"6",maxLength:"70"}))),d.a.createElement(qe,{onChange:this.onChange,value:s}),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-12"},d.a.createElement("button",{className:"btn btn-primary",onClick:o?this.desativaRepresentanteLegal:this.ativaRepresentanteLegal},o?"Utilizar o mesmo Representante Legal do Concedente":"Informar Representante Legal diferente do Concedente"))),void 0!==u?d.a.createElement(Fe,{onChange:this.onChange,value:u}):null,d.a.createElement("input",{type:"submit",value:"Cadastrar"}))}}]),a}(m.Component);function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var $e=function(e){Object(g.a)(a,e);var t=ze(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={listaDeCampos:[]},e.carregarListaDeCampos=e.carregarListaDeCampos.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.carregarListaDeCampos()}},{key:"carregarListaDeCampos",value:function(){var e=this;this.props.api.CamposDeEstagio.ListaTodos(function(t){return e.setState({listaDeCampos:t})},function(e){return console.log("erro",e)})}},{key:"linkParaBaixarModeloDeAteste",value:function(e){var t=this.props.api;return"".concat(t.CamposDeEstagio.getBaseUrl(),"/").concat(e,"/baixar")}},{key:"baixar",value:function(e){var t=this,a=this.props.api.Auth.accessToken(),n=this.linkParaBaixarModeloDeAteste(e);fetch(n,{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e.blob()}).then(function(a){var n=window.URL.createObjectURL(new Blob([a]));t.setState(function(t){var a=t.listaDeCampos,r=a.filter(function(t){return t.id===e})[0],o=Object(C.a)({},r,{blobUrl:n}),c=a.reduce(function(t,a){return t.push(a.id===e?o:a),t},[]);return Object(C.a)({},t,{listaDeCampos:Object(_e.a)(c)})})})}},{key:"render",value:function(){var e=this,t=this.state.listaDeCampos;return d.a.createElement("div",null,d.a.createElement("h5",null,"Rela\xe7\xe3o de Campos de Est\xe1gio"),d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Concedente"),d.a.createElement("th",null,"Nome"),d.a.createElement("th",null,"Telefone"),d.a.createElement("th",null,"Email"),d.a.createElement("th",null,"Ateste (formul\xe1rio)"))),d.a.createElement("tbody",null,t.map(function(t){var a=t.concedente;return d.a.createElement("tr",{key:t.id},d.a.createElement("td",null,null!==a?a.nome:""),d.a.createElement("td",null,t.nome),d.a.createElement("td",null,t.telefone),d.a.createElement("td",null,t.email),d.a.createElement("td",null,void 0===t.blobUrl?d.a.createElement("button",{onClick:function(){return e.baixar(t.id)}},"Baixar"):d.a.createElement("button",{onClick:function(){return window.open(t.blobUrl,"_blank")}},"Abrir")))}))))}}]),a}(m.Component);function We(e){var t=e.listaDeCampos,a=e.onSelect;return d.a.createElement("div",null,d.a.createElement("h5",null,"Selecione o Campo de Est\xe1gio que deseja cadastrar o ateste"),d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Concedente"),d.a.createElement("th",null,"Nome"),d.a.createElement("th",null,"Telefone"),d.a.createElement("th",null,"Email"),d.a.createElement("th",null,"Munic\xedpio"))),d.a.createElement("tbody",null,t.map(function(e){var t=e.concedente;return d.a.createElement("tr",{key:e.id,onClick:function(){return a(e)}},d.a.createElement("td",null,null!==t?t.nome:""),d.a.createElement("td",null,e.nome),d.a.createElement("td",null,e.telefone),d.a.createElement("td",null,e.email),d.a.createElement("td",null,e.endereco.municipio))}))))}function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var Ge=function(e){Object(g.a)(a,e);var t=Je(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={listaDeCampos:[],listaDeCursos:[],dados:{curso:{id:""},responsavel:{nome:"",siape:"",formacao:""},vigencia:{inicio:"",fim:""},ativo:!0,observacoes:""}},e.carregaListaDeCampos=e.carregaListaDeCampos.bind(Object(Se.a)(e)),e.carregaListaDeCursos=e.carregaListaDeCursos.bind(Object(Se.a)(e)),e.onChange=e.onChange.bind(Object(Se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.carregaListaDeCampos(),this.carregaListaDeCursos()}},{key:"carregaListaDeCampos",value:function(){var e=this;this.props.api.Cursos.ListaTodos(function(t){return e.setState({listaDeCursos:t})})}},{key:"carregaListaDeCursos",value:function(){var e=this;this.props.api.CamposDeEstagio.ListaTodos(function(t){return e.setState({listaDeCampos:t})})}},{key:"atestarCampoDeEstagio",value:function(e){this.props.api.AtestesDeCampo.Novo(e,window.location.href=" #",function(e){return console.log(e)})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state.dados;this.atestarCampoDeEstagio(t)}},{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(function(e){return{dados:Object(C.a)({},e.dados,Object(Te.a)({},a,n))}})}},{key:"onChangeSubAttribute",value:function(e,t){var a=t.target,n=a.name,r=a.value,o={name:e,value:Object(C.a)({},this.state.dados[e],Object(Te.a)({},n,r))};this.onChange({target:o})}},{key:"render",value:function(){var e=this,t=this.state,a=t.dados,n=t.listaDeCampos,r=t.listaDeCursos;if(void 0===a.local_de_estagio)return d.a.createElement(We,{listaDeCampos:n,onSelect:function(t){return e.setState(function(e){return{dados:Object(C.a)({},e.dados,{local_de_estagio:t})}})}});var o=a.curso,c=a.responsavel,l=a.vigencia,i=a.observacoes;return d.a.createElement("form",{className:"container",onSubmit:this.onSubmit},d.a.createElement("h5",{className:"my-2 text-dark"},d.a.createElement("strong",null,"Cadastro de Ateste de Campo de Est\xe1gio")),d.a.createElement("h5",null,"Respons\xe1vel pelo Ateste"),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-lg-6 col-md-9 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"nome"},"Nome"),d.a.createElement("input",{className:"form-control",id:"nome",name:"nome",type:"text",value:c.nome,onChange:function(t){return e.onChangeSubAttribute("responsavel",t)},required:!0,minLength:"2",maxLength:"80",pattern:"^.{2,80}$"})),d.a.createElement("div",{className:"form-group col-lg-2 col-md-9 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"siape"},"Siape"),d.a.createElement("input",{className:"form-control",id:"siape",name:"siape",type:"text",value:c.siape,onChange:function(t){return e.onChangeSubAttribute("responsavel",t)},required:!0,minLength:"2",maxLength:"80",pattern:"^.{2,80}$"})),d.a.createElement("div",{className:"form-group col-lg-4 col-md-9 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"formacao"},"Forma\xe7\xe3o"),d.a.createElement("input",{className:"form-control",id:"formacao",name:"formacao",type:"text",value:c.formacao,onChange:function(t){return e.onChangeSubAttribute("responsavel",t)},required:!0,minLength:"2",maxLength:"80",pattern:"^.{2,80}$"}))),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-lg-6 col-md-9 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"curso"},"Curso"),d.a.createElement("select",{className:"form-control",id:"curso",name:"id",value:o.id,onChange:function(t){return e.onChangeSubAttribute("curso",t)},required:!0},d.a.createElement("option",{value:""},"Selecione um curso"),r.map(function(e){return d.a.createElement("option",{key:e.id,value:e.id},e.nome)}))),d.a.createElement("div",{className:"form-group col-lg-3 col-md-9 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"inicio"},"Inicio"),d.a.createElement("input",{className:"form-control",id:"inicio",name:"inicio",type:"date",value:l.inicio,onChange:function(t){return e.onChangeSubAttribute("vigencia",t)},required:!0,minLength:"2",maxLength:"80",pattern:"^.{2,80}$"})),d.a.createElement("div",{className:"form-group col-lg-3 col-md-9 col-sm-12 col-12"},d.a.createElement("label",{htmlFor:"fim"},"Fim"),d.a.createElement("input",{className:"form-control",id:"fim",name:"fim",type:"date",value:l.fim,onChange:function(t){return e.onChangeSubAttribute("vigencia",t)},required:!0,minLength:"2",maxLength:"80",pattern:"^.{2,80}$"}))),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-12"},d.a.createElement("label",{htmlFor:"observacoes"},"Observa\xe7\xf5es"),d.a.createElement("textarea",{className:"form-control",id:"observacoes",name:"observacoes",onChange:this.onChange},i))),d.a.createElement("input",{type:"submit",value:"Cadastrar"}))}}]),a}(m.Component);function Ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var Ze=function(e){Object(g.a)(a,e);var t=Ve(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={listaDeAtestes:[]},e.carregarListaDeAtestes=e.carregarListaDeAtestes.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.carregarListaDeAtestes()}},{key:"carregarListaDeAtestes",value:function(){var e=this;this.props.api.AtestesDeCampo.ListaTodos(function(t){return e.setState({listaDeAtestes:t})},function(e){return console.log("erro",e)})}},{key:"apagarAteste",value:function(e){this.props.api.AtestesDeCampo.RemovePelaId(e,this.setState(function(t){return{listaDeAtestes:t.listaDeAtestes.filter(function(t){return t.id!==e})}}),function(e){return console.log("erro",e)})}},{key:"render",value:function(){var e=this,t=this.state.listaDeAtestes;return d.a.createElement("div",null,d.a.createElement("h5",null,"Rela\xe7\xe3o de Atestes de Campo"),d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null),d.a.createElement("th",null),d.a.createElement("th",null,"Campo de Est\xe1gio"),d.a.createElement("th",null,"Respons\xe1vel"),d.a.createElement("th",null,"Curso"),d.a.createElement("th",null,"Vig\xeancia"),d.a.createElement("th",null))),d.a.createElement("tbody",null,t.map(function(t,a){var n=t.responsavel,r=t.local_de_estagio,o=t.curso,c=t.vigencia;return d.a.createElement("tr",{key:t.id,title:t.observacoes},d.a.createElement("td",null,t.ativo&&d.a.createElement(d.a.Fragment,null,">")),d.a.createElement("td",null,a+1),d.a.createElement("td",null,r.nome),d.a.createElement("td",null,n.nome),d.a.createElement("td",null,o.nome),d.a.createElement("td",null,"".concat(new Date(c.inicio).toLocaleDateString()," a ").concat(new Date(c.fim).toLocaleDateString())),d.a.createElement("td",null,d.a.createElement("button",{onClick:function(){return e.apagarAteste(t.id)}},"Apagar")))}))))}}]),a}(m.Component);function Xe(e){var t=e.listaDeRequerimentos,a=e.onSelect;return d.a.createElement("div",null,d.a.createElement("h5",{className:"my-0 text-dark"},d.a.createElement("strong",null,"Selecione o Requerimento base para o Termo de Compromisso")),d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"CPF"),d.a.createElement("th",null,"Nome"),d.a.createElement("th",null,"Matr\xedcula"),d.a.createElement("th",null,"Curso"))),d.a.createElement("tbody",null,t.map(function(e){return d.a.createElement("tr",{key:e.id,onClick:function(){return a(e)}},d.a.createElement("td",null,e.aluno.cpf),d.a.createElement("td",null,e.aluno.nome),d.a.createElement("td",null,e.aluno.matricula),d.a.createElement("td",null,e.aluno.curso.nome))}))))}function He(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}function Ye(e){var t=e.title,a=e.value;return d.a.createElement("div",null,d.a.createElement("strong",null,t,": "),a)}function Ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var Qe={"":function(){return d.a.createElement("h5",null,"Bem vindo(a)")},"#login":function(e){var t=e.api,a=d.a.createRef(),n=d.a.createRef();return void 0!==t.Auth.accessToken()&&(window.location.href="#"),d.a.createElement("div",{className:"container bg-white p-0",style:{minHeight:"100vh"}},d.a.createElement("form",{className:"container",onSubmit:function(e){e.preventDefault();var r=a.current.value,o=n.current.value;t.Auth.Login(r,o)}},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Usuario"),d.a.createElement("input",{className:"form-control",type:"text",ref:a})),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Senha"),d.a.createElement("input",{className:"form-control",type:"password",ref:n})),d.a.createElement("input",{type:"submit",value:"Entrar"})))},"#logout":function(e){return e.api.Auth.Logout(),null},"#termo_novo":function(e){Object(g.a)(a,e);var t=He(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={listaDeApolices:[],listaDeRequerimentos:[],tce:{apolice:{},jornada_estagio:{dias_da_semana:"SEGUNDA_SEXTA",horario_inicio:"08:00",horario_final:"18:00"}}},e.onChange=e.onChange.bind(Object(Se.a)(e)),e.onChangeSubAttribute=e.onChangeSubAttribute.bind(Object(Se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(Se.a)(e)),e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.carregaRelacaoDeRequerimentos()}},{key:"componentDidMount",value:function(){this.carregaRelacaoDeApolices(),this.carregaValoresIniciais()}},{key:"criaTermoDeCompromisso",value:function(e){this.props.api.TermosDeCompromisso.CriaTermoDeCompromisso(e,window.location.href="#",function(e){return console.log(e)})}},{key:"carregaRelacaoDeRequerimentos",value:function(){var e=this;this.props.api.Requerimentos.ListaRequerimentos(function(t){return e.setState({listaDeRequerimentos:t})})}},{key:"carregaRelacaoDeApolices",value:function(){var e=this;this.props.api.Apolices.ListaApolices(function(t){return e.setState({listaDeApolices:t})})}},{key:"carregaValoresIniciais",value:function(){var e=new Date;e.setDate(e.getDate()+2);var t=6===e.getDay()?2:0===e.getDay()?1:0;e.setDate(e.getDate()+t);var a=e.toISOString().substring(0,10);e.setDate(e.getDate()+1);var n=e.toISOString().substring(0,10);e.setDate(e.getDate()+60);var r=e.toISOString().substring(0,10);this.setState(function(e){return{tce:Object(C.a)({},e.tce,{data_da_assinatura:a,vigencia:{inicio:n,fim:r}})}})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state.tce;this.criaTermoDeCompromisso(t)}},{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(function(e){return{tce:Object(C.a)({},e.tce,Object(Te.a)({},a,n))}})}},{key:"onChangeSubAttribute",value:function(e,t){var a=t.target,n=a.name,r=a.value,o={name:e,value:Object(C.a)({},this.state.tce[e],Object(Te.a)({},n,r))};this.onChange({target:o})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tce,n=t.listaDeApolices,r=t.listaDeRequerimentos,o=void 0!==a.requerimento?r.filter(function(e){return e.id===a.requerimento.id})[0]:{};return void 0===a.requerimento?d.a.createElement(Xe,{listaDeRequerimentos:r,onSelect:function(t){return e.setState(function(e){return{tce:Object(C.a)({},e.tce,{requerimento:{id:t.id},carga_horaria_minima:t.aluno.curso.carga_horaria_minima})}})}}):d.a.createElement("div",{className:"container"},d.a.createElement("form",{className:"NovoTCE",onSubmit:this.onSubmit},d.a.createElement("h5",{className:"my-0 text-dark"},d.a.createElement("strong",null,"Emiss\xe3o de Termo de Compromisso")),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-12"},d.a.createElement(Ye,{title:"Aluno(a)",value:o.aluno.nome}),d.a.createElement(Ye,{title:"CPF",value:o.aluno.cpf}),d.a.createElement(Ye,{title:"Matr\xedcula",value:o.aluno.matricula}),d.a.createElement(Ye,{title:"Curso",value:o.aluno.curso.nome}),d.a.createElement(Ye,{title:"Concedente",value:o.local_do_estagio.concedente.nome}),d.a.createElement(Ye,{title:"Campo de Est\xe1gio",value:o.local_do_estagio.nome}),d.a.createElement(Ye,{title:"Orientador(a)",value:o.orientador.nome}),d.a.createElement(Ye,{title:"Supervisor(a)",value:o.supervisor.nome}))),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-lg-6 col-md-3 col-sm-6 col-6"},d.a.createElement("label",{htmlFor:"apolice"},"Apolice do Seguro de acidentes pessoais"),d.a.createElement("select",{className:"custom-select",id:"id",name:"id",value:a.apolice.id,onChange:function(t){return e.onChangeSubAttribute("apolice",t)},required:!0},d.a.createElement("option",{key:"",value:""},"Selecione uma apolice"),n.map(function(e){return d.a.createElement("option",{key:e.id,value:e.id},e.empresa)}))),d.a.createElement("div",{className:"form-group col-lg-2 col-md-3 col-sm-6 col-6"},d.a.createElement("label",{htmlFor:"inicio"},"Inicio da Vig\xeancia"),d.a.createElement("input",{className:"form-control",id:"inicio",name:"inicio",type:"date",value:a.vigencia.inicio,onChange:function(t){return e.onChangeSubAttribute("vigencia",t)},required:!0})),d.a.createElement("div",{className:"form-group col-lg-2 col-md-3 col-sm-6 col-6"},d.a.createElement("label",{htmlFor:"fim"},"Final da Vig\xeancia"),d.a.createElement("input",{className:"form-control",id:"fim",name:"fim",type:"date",value:a.vigencia.fim,onChange:function(t){return e.onChangeSubAttribute("vigencia",t)},required:!0})),d.a.createElement("div",{className:"form-group col-lg-2 col-md-3 col-sm-6 col-6"},d.a.createElement("label",{htmlFor:"carga_horaria_minima"},"Carga Hor\xe1ria M\xednima"),d.a.createElement("input",{className:"form-control",id:"carga_horaria_minima",name:"carga_horaria_minima",type:"number",value:a.carga_horaria_minima,onChange:this.onChange,required:!0}))),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"form-group col-lg-4 col-md-3 col-sm-6 col-6"},d.a.createElement("label",{htmlFor:"dias_da_semana"},"Dias para est\xe1gio"),d.a.createElement("select",{className:"custom-select",id:"dias_da_semana",name:"dias_da_semana",value:a.jornada_estagio.dias_da_semana,onChange:function(t){return e.onChangeSubAttribute("jornada_estagio",t)}},d.a.createElement("option",{key:"SEGUNDA_SEXTA",value:"SEGUNDA_SEXTA"},"Segunda a Sexta-Feira"),d.a.createElement("option",{key:"SEGUNDA_SABADO",value:"SEGUNDA_SABADO"},"Segunda a S\xe1bado"),d.a.createElement("option",{key:"DOMINGO_SABADO",value:"DOMINGO_SABADO"},"Todos os dias"))),d.a.createElement("div",{className:"form-group col-lg-2 col-md-3 col-sm-6 col-6"},d.a.createElement("label",{htmlFor:"horario_inicio"},"In\xedcio"),d.a.createElement("input",{className:"form-control",id:"horario_inicio",name:"horario_inicio",type:"time",min:"06:00",max:"22:00",value:a.jornada_estagio.horario_inicio,onChange:function(t){return e.onChangeSubAttribute("jornada_estagio",t)},required:!0})),d.a.createElement("div",{className:"form-group col-lg-2 col-md-3 col-sm-6 col-6"},d.a.createElement("label",{htmlFor:"horario_final"},"Final"),d.a.createElement("input",{className:"form-control",id:"horario_final",name:"horario_final",type:"time",min:"06:00",max:"22:00",value:a.jornada_estagio.horario_final,onChange:function(t){return e.onChangeSubAttribute("jornada_estagio",t)},required:!0})),d.a.createElement("div",{className:"form-group col-lg-4 col-md-3 col-sm-6 col-6"},d.a.createElement("label",{htmlFor:"data_da_assinatura"},"Data da assinatura do Termo de Compromisso"),d.a.createElement("input",{className:"form-control",id:"data_da_assinatura",name:"data_da_assinatura",type:"date",value:a.data_da_assinatura,onChange:this.onChange,required:!0}))),d.a.createElement("div",{className:"form-row bg-light"},d.a.createElement("div",{className:"py-2 col-lg-3 col-md-4 col-sm-6 col-12"},d.a.createElement("input",{className:"form-control btn btn-success",type:"submit",value:"Avan\xe7ar"})))))}}]),a}(m.Component),"#termo_lista":function(e){Object(g.a)(a,e);var t=Ke(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).api=new Ee,e.state={listaDeTCE:[]},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.api.TermosDeCompromisso.ListaTermosDeCompromisso(function(t){return e.setState({listaDeTCE:t})},function(e){return console.log("erro",e)})}},{key:"linkParaBaixarTermo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.api,a=e.lastIndexOf("/"),n=e.substr(0,a-1)+e.substr(a);return"".concat(t.TermosDeCompromisso.getBaseUrl(),"/").concat(n,"/baixar")}},{key:"baixar",value:function(e){var t=this,a=this.props.api.Auth.accessToken(),n=this.linkParaBaixarTermo(e);fetch(n,{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e.blob()}).then(function(a){var n=window.URL.createObjectURL(new Blob([a]));t.setState(function(t){var a=t.listaDeTCE,r=a.filter(function(t){return t.registro===e})[0],o=Object(C.a)({},r,{blobUrl:n}),c=a.reduce(function(t,a){return t.push(a.registro===e?o:a),t},[]);return Object(C.a)({},t,{listaDeTCE:Object(_e.a)(c)})})})}},{key:"render",value:function(){var e=this,t=this.state.listaDeTCE;return d.a.createElement("div",null,d.a.createElement("h5",null,"Listar TCE"),d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Registro"),d.a.createElement("th",null,"Estagi\xe1rio"),d.a.createElement("th",null,"Campo de Est\xe1gio"),d.a.createElement("th",null,"Vig\xeancia"),d.a.createElement("th",null))),d.a.createElement("tbody",null,t.map(function(t){var a=t.vigencia,n=t.aluno,r=t.local_do_estagio;return d.a.createElement("tr",{key:t.id},d.a.createElement("td",null,t.registro),d.a.createElement("td",null,n.nome),d.a.createElement("td",null,r.nome),d.a.createElement("td",null,"".concat(new Date(a.inicio).toLocaleDateString()," a ").concat(new Date(a.fim).toLocaleDateString())),d.a.createElement("td",null,void 0===t.blobUrl?d.a.createElement("button",{onClick:function(){return e.baixar(t.registro)}},"Baixar"):d.a.createElement("button",{onClick:function(){return window.open(t.blobUrl,"_blank")}},"Abrir"),d.a.createElement("button",{onClick:function(){return e.aditivarTermo(t)}},"Aditivar")))}))))}}]),a}(m.Component),"#requerimento_lista":Re,"#proposta_concedente_lista":Ne,"#concedente_lista":xe,"#campo_novo":Me,"#campo_lista":$e,"#ateste_novo":Ge,"#ateste_lista":Ze},et={Requerimento:{href:" #",dropdown:[{href:"#requerimento_novo",label:"Cadastrar"},{href:"#requerimento_lista",label:"Listar Requerimentos"}]},Concedentes:{href:" #",dropdown:[{href:"#proposta_concedente_lista",label:"Rela\xe7\xe3o de Propostas"},{href:"#concedente_lista",label:"Rela\xe7\xe3o de Concedentes"}]},"Campos de Est\xe1gio":{href:" #",dropdown:[{href:"#campo_novo",label:"Cadastrar Campo de Est\xe1gio"},{href:"#campo_lista",label:"Rela\xe7\xe3o de Campos de Est\xe1gio"},{href:"#ateste_novo",label:"Cadastrar Ateste de Campo"},{href:"#ateste_lista",label:"Rela\xe7\xe3o de Atestes de Campo"}]},"Termos de Compromisso":{href:" #",dropdown:[{href:"#termo_novo",label:"Emitir Novo Termo"},{href:"#termo_lista",label:"Listar Termos Vigentes"}]},Sair:{href:"#logout"}},tt=a(12);function at(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(E.a)(e);if(t){var r=Object(E.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(b.a)(this,a)}}var nt=function(e){Object(g.a)(a,e);var t=at(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).api=new Ee,e.state={},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.interval=setInterval(function(){var t={accessTokenAtivo:e.api.Auth.accessTokenAtivo(),refreshTokenAtivo:e.api.Auth.refreshTokenAtivo()};Object(tt.isEqual)(t,e.state)||e.setState({accessTokenAtivo:e.api.Auth.accessTokenAtivo(),refreshTokenAtivo:e.api.Auth.refreshTokenAtivo()})},300)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.accessTokenAtivo,a=e.refreshTokenAtivo,n=t;return!t&&a?this.api.Auth.Refresh():t||a||(window.location.href="#login"),d.a.createElement("div",{className:"container bg-white p-0",style:{minHeight:"100vh",minWidth:"90%"}},n?d.a.createElement(De,{menu:et}):null,d.a.createElement(ke,{rotas:Qe,api:this.api}))}}]),a}(m.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.a.render(d.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.05433f3c.chunk.js.map